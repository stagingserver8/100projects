<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    <title>To Do List</title>
</head>


<div class="displayarea">  
    
    <div class="container">
        <form id="form">
            <input id="textWindow" type="text" placeholder="New Task" name="New Task"> 
            <input id="button" type="submit" value="Add" class="btn">
            <button id="clear"> Clear </button>
        </form>
        
    </div>

    <br>

    <div class ="alert"></div>

    <div class = "containerlist"> 
        <div class="answers"> </div>
        <ul id="ansList"> </ul>
</div>   

</body>

<script>

//DOM load event
document.addEventListener('DOMContentLoaded', getTasks)



//Get tasks from LS
function getTasks() {
    let tasks;
        if(localStorage.getItem('tasks') === null){
            tasks=[];
            
        } else {
            tasks = JSON.parse(localStorage.getItem('tasks'))
        }

       tasks.forEach(function(task){

            document.querySelector(".alert").innerHTML=""
            const link = document.createElement('a');
            link.classList = "delete-item secondary-content"
            link.innerHTML = '  <i class="fa fa-circle" style="font-size:18px;color:black"> </i> '

            var ul = document.getElementById("ansList");

            //Defining element in the list
            var li = document.createElement('li');
            
            //Appending that was typed to li
            li.appendChild(document.createTextNode(task));
            //Adding Li to list 
            ul.appendChild(li);
            //Adding X icon to the 'li'
            li.prepend(link);
        
       })
        
}




//Clicking on the 'Clear' button
document.getElementById('clear').addEventListener('click', function(e) 
{
    document.getElementById("ansList").innerHTML = "";
    document.getElementById("textWindow").value = "";
    document.querySelector(".alert").innerHTML=""
e.preventDefault();
})

// An event listener is waiting for form to be submitted
document.getElementById('button').addEventListener('click', function(e){ 
    //Gets input value into a variable called 'input'
    var input = document.getElementById('textWindow').value;
    
    if (input === "") 
        {
        document.querySelector(".alert").innerHTML="Please add an item!"
        e.preventDefault();
        } 
        
        else 
        
        {
            document.querySelector(".alert").innerHTML=""
            const link = document.createElement('a');
            link.classList = "delete-item secondary-content"
            link.innerHTML = '  <i class="fa fa-circle" style="font-size:18px;color:black"> </i> '
        
        
            //Defining List
            var ul = document.getElementById("ansList");

            //Defining element in the list
            var li = document.createElement('li');
            
            //Appending that was typed to li
            li.appendChild(document.createTextNode(input));
            //Adding Li to list 
            ul.appendChild(li);
            //Adding X icon to the 'li'
            li.prepend(link);


            //Reseting input window to = 
            document.getElementById("textWindow").value = "";
            
            // Store in LS
           storetaskinLS(input);

            e.preventDefault();
        }

    //Store in LS

    function storetaskinLS(task) {
        let tasks;
        if(localStorage.getItem('tasks') === null){
            tasks=[];
            
        } else {
            tasks = JSON.parse(localStorage.getItem('tasks'))
        }

        tasks.push(task);
        localStorage.setItem('tasks', JSON.stringify(tasks));

    }

    /*
function function1() {
var ul = document. getElementById("list");
var li = document. createElement("li");
li. appendChild(document. createTextNode("Four"));
ul. appendChild(li);
}
*/

   //array.push(input)
    //console.log(array)
    //const display = document.querySelector('.answers')
    //Add a small cross at the end

    
    

})

document.body.addEventListener('click', deleteItem);

function deleteItem(e) {
    if(e.target.parentElement.classList.contains('delete-item')) {
        e.target.parentElement.parentElement.style="color:grey; text-decoration:line-through; font-size:smaller;";
        e.target.parentElement.remove();
        removeTaskFromLS(e.target.parentElement) 
    }}




        //Remove from LS
       
        function removeTaskFromLS(taskItem){
       console.log(taskItem.textContent)
        };



</script>

</html>





